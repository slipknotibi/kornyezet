<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Szöveges memóriajáték – Liliennek</title>
<style>
    body {
        font-family: system-ui;
        background:#f5f5f5;
        padding:20px;
        text-align:center;
    }

    h1 {
        margin-bottom:10px;
    }

    #infoBar {
        margin-bottom:20px;
        font-size:18px;
        display:flex;
        justify-content:center;
        gap:20px;
        flex-wrap:wrap;
    }

    #game {
        display:grid;
        grid-template-columns:repeat(4, 1fr);
        gap:15px;
        max-width:650px;
        margin:0 auto;
    }

    .card {
        background:white;
        border-radius:12px;
        height:130px;
        display:flex;
        align-items:center;
        justify-content:center;
        cursor:pointer;
        position:relative;
        transform-style:preserve-3d;
        transition:0.4s;
        font-size:18px;
        padding:10px;
        border:2px solid #ddd;
        box-shadow:0 2px 6px rgba(0,0,0,0.15);
    }

    .card.flipped {
        transform:rotateY(180deg);
    }

    .front, .back {
        position:absolute;
        width:100%;
        height:100%;
        backface-visibility:hidden;
        display:flex;
        align-items:center;
        justify-content:center;
        border-radius:12px;
        padding:10px;
    }

    .front {
        background:#4caf50;
        color:white;
        font-size:28px;
        font-weight:bold;
    }

    .back {
        transform:rotateY(180deg);
        color:#333;
        font-size:18px;
        padding:10px;
        text-align:center;
    }

    .matched {
        pointer-events:none;
        animation:popout 0.4s ease forwards;
    }

    @keyframes popout {
        0%   { transform:rotateY(180deg) scale(1); opacity:1; }
        50%  { transform:rotateY(180deg) scale(1.1); opacity:1; }
        100% { transform:rotateY(180deg) scale(0.1); opacity:0; }
    }

    #reset {
        margin-top:25px;
        padding:12px 25px;
        font-size:18px;
        border-radius:10px;
        background:#4caf50;
        color:white;
        border:none;
        cursor:pointer;
    }

    #reset:hover {
        background:#43a047;
    }

    #message {
        margin-top:15px;
        font-size:18px;
        font-weight:600;
    }
</style>
</head>
<body>

<h1>Szöveges memóriajáték – Liliennek</h1>

<div id="infoBar">
    <div>Pontszám: <span id="score">0</span> / 10</div>
    <div>Idő: <span id="time">0:00</span></div>
</div>

<div id="game"></div>
<button id="reset">Újrakeverés</button>
<div id="message"></div>

<script>
const pairs = [
    { a:"Emlős", b:"Szőr borítja" },
    { a:"Madár", b:"Toll borítja" },
    { a:"Hal", b:"Pikkely borítja" },
    { a:"Csuka", b:"Ragadozó hal" },
    { a:"Gyökér", b:"Rögzíti a növényt" },
    { a:"Levél", b:"Táplálékot készít" },
    { a:"Virág", b:"Szaporító szerv" },
    { a:"Amur", b:"Növényevő hal" },
    { a:"Ponty", b:"Mindenevő hal" },
    { a:"Légzés", b:"Levegő felvétele" }
];

// pasztell színek minden párnak
const colors = [
    "#ffe0e9", // rózsaszínes
    "#e0f7ff", // világoskék
    "#e6ffe0", // halványzöld
    "#fff4e0", // barack
    "#f0e0ff", // lila
    "#e0fff7", // türkiz
    "#fffbe0", // halványsárga
    "#ffe0f7", // pink
    "#e0ecff", // kékes
    "#e0fff0"  // zöldes
];

let cards = [];
let flipped = [];
let lock = false;
let score = 0;
let startTime = null;
let timerId = null;

function formatTime(sec) {
    const m = Math.floor(sec / 60);
    const s = sec % 60;
    return m + ":" + (s < 10 ? "0" + s : s);
}

function startTimer() {
    startTime = Date.now();
    if (timerId) clearInterval(timerId);
    timerId = setInterval(() => {
        const diffSec = Math.floor((Date.now() - startTime) / 1000);
        document.getElementById("time").textContent = formatTime(diffSec);
    }, 1000);
}

function stopTimer() {
    if (timerId) {
        clearInterval(timerId);
        timerId = null;
    }
}

function initGame() {
    const game = document.getElementById("game");
    game.innerHTML = "";
    cards = [];
    flipped = [];
    lock = false;
    score = 0;
    document.getElementById("score").textContent = score;
    document.getElementById("message").textContent = "";
    document.getElementById("time").textContent = "0:00";

    // pakli összeállítása (minden pár két kártya, azonos színnel)
    let deck = [];
    pairs.forEach((p, i) => {
        const color = colors[i % colors.length];
        deck.push({ id:i, text:p.a, color });
        deck.push({ id:i, text:p.b, color });
    });

    // keverés
    deck.sort(() => Math.random() - 0.5);

    deck.forEach(cardData => {
        const card = document.createElement("div");
        card.className = "card";
        card.dataset.id = cardData.id;

        const front = document.createElement("div");
        front.className = "front";
        front.textContent = "?";

        const back = document.createElement("div");
        back.className = "back";
        back.textContent = cardData.text;
        back.style.background = cardData.color;

        card.appendChild(front);
        card.appendChild(back);

        card.addEventListener("click", () => flipCard(card));

        game.appendChild(card);
        cards.push(card);
    });

    startTimer();
}

function flipCard(card) {
    if (lock || card.classList.contains("flipped") || card.classList.contains("matched")) return;

    card.classList.add("flipped");
    flipped.push(card);

    if (flipped.length === 2) {
        lock = true;
        setTimeout(checkMatch, 600);
    }
}

function checkMatch() {
    const [a, b] = flipped;

    if (a.dataset.id === b.dataset.id) {
        // helyes pár
        a.classList.add("matched");
        b.classList.add("matched");
        score++;
        document.getElementById("score").textContent = score;

        // ha minden pár megvan
        if (score === pairs.length) {
            stopTimer();
            const totalSec = Math.floor((Date.now() - startTime) / 1000);
            document.getElementById("message").textContent =
                "Gratulálok, minden pár megvan! Időd: " + formatTime(totalSec);
        }
    } else {
        // nem pár – visszafordítás
        a.classList.remove("flipped");
        b.classList.remove("flipped");
    }

    flipped = [];
    lock = false;
}

document.getElementById("reset").addEventListener("click", () => {
    stopTimer();
    initGame();
});

initGame();
</script>

</body>
</html>
